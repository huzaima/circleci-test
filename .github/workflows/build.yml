
on:
    push:
        paths-ignore:
            - "ops/**"
            - "**.md"
            - "docs/**"
            - "CODEOWNERS"
        branches-ignore:
          - 'refs/tags/*'
    release:
        types:
          - published
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
          - run: |
             if [[ ${{ github.event_name }} == 'release' ]]; then
               echo "HEROKU_APP_NAME=${{ secrets.HEROKU_PRODUCTION_APP_NAME }}" >> $GITHUB_ENV
               echo "ENVIRONMENT_HEROKU=production" >> $GITHUB_OUTPUT
               echo "ENVIRONMENT_K8=prod" >> $GITHUB_OUTPUT
             else
               echo "HEROKU_APP_NAME=${{ secrets.HEROKU_STAGING_APP_NAME }}" >> $GITHUB_ENV
               echo "ENVIRONMENT_HEROKU=staging" >> $GITHUB_OUTPUT
               echo "ENVIRONMENT_K8=stage" >> $GITHUB_OUTPUT
             fi

             echo ${{env.HEROKU_APP_NAME}} | sed 's/./& /g'